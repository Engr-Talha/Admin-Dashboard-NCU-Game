<main *ngIf="user !== ''" class="profile-page">
  <section class="relative block" style="height: 500px">
    <div
      class="absolute top-0 h-full w-full bg-cover bg-center"
      style="
        background-image: url('https://images.unsplash.com/photo-1499336315816-097655dcfbda?ixlib=rb-1.2.1&amp;ixid=eyJhcHBfaWQiOjEyMDd9&amp;auto=format&amp;fit=crop&amp;w=2710&amp;q=80');
      ">
      <span id="blackOverlay" class="absolute h-full w-full bg-black opacity-50"></span>
    </div>
    <div
      class="pointer-events-none absolute top-auto bottom-0 left-0 right-0 w-full overflow-hidden"
      style="height: 70px"></div>
  </section>
  <section class="relative bg-gray-300 py-16">
    <div class="container mx-auto px-4">
      <div class="relative mb-6 -mt-64 flex w-full min-w-0 flex-col break-words rounded-lg bg-white shadow-xl">
        <div class="px-6">
          <div class="flex flex-wrap justify-center">
            <div class="flex w-full justify-center px-4 lg:order-2 lg:w-3/12">
              <div class="relative">
                <img
                  alt="..."
                  src="../../../assets/images/angular.jpeg"
                  class="absolute -m-16 -ml-20 h-auto rounded-full border-none align-middle shadow-xl lg:-ml-16"
                  style="max-width: 150px" />
              </div>
            </div>
            <!-- <div class="w-full px-4 lg:order-3 lg:w-4/12 lg:self-center lg:text-right">
              <div class="mt-32 py-6 px-3 sm:mt-0">
                <button
                  class="active:bg-black-600 mb-1 rounded bg-gray-500 px-4 py-2 text-xs font-bold uppercase text-white shadow outline-none focus:outline-none hover:shadow-md sm:mr-2"
                  type="button"
                  style="transition: all 0.15s ease 0s">
                  Edit
                </button>
              </div>
            </div> -->
            <div class="w-full px-4 lg:order-1 lg:w-4/12">
              <div class="flex justify-center py-4 pt-8 lg:pt-4">
                <div class="mr-4 p-3 text-center">
                  <span class="block text-xl font-bold uppercase tracking-wide text-gray-700">{{ user?.aura }}</span
                  ><span class="text-sm text-gray-500">Aura</span>
                </div>

                <div class="mr-4 p-3 text-center">
                  <span class="block text-xl font-bold uppercase tracking-wide text-gray-700">{{ user?.gems }}</span
                  ><span class="text-sm text-gray-500">Gems</span>
                </div>

                <div class="p-3 text-center lg:mr-4">
                  <span class="block text-xl font-bold uppercase tracking-wide text-gray-700">{{ user?.stones }}</span
                  ><span class="text-sm text-gray-500">Stones</span>
                </div>
              </div>
            </div>
          </div>
          <div class="mt-12 text-center">
            <h3 class="mb-2 mb-2 text-4xl font-semibold leading-normal text-gray-800">{{ user?.username }}</h3>
            <div class="mt-0 mb-2 text-sm font-bold uppercase leading-normal text-gray-500">Level ID: 12123</div>

            <div class="mb-2 mt-5 text-gray-700">
              <div class="flex justify-center py-4 pt-8 lg:pt-4">
                <div class="mr-4 p-3 text-center">
                  <span class="block text-xl font-bold uppercase tracking-wide text-gray-700">{{
                    user?.battleRank
                  }}</span
                  ><span class="text-sm text-gray-500">Battle Rank</span>
                </div>

                <div class="mr-4 p-3 text-center">
                  <span class="block text-xl font-bold uppercase tracking-wide text-gray-700">{{ user?.xp }}</span
                  ><span class="text-sm text-gray-500">XP</span>
                </div>

                <div class="p-3 text-center lg:mr-4">
                  <span class="block text-xl font-bold uppercase tracking-wide text-gray-700">{{ user?.stones }}</span
                  ><span class="text-sm text-gray-500">Stones</span>
                </div>
              </div>
            </div>
          </div>
          <div class="mt-10 py-10 text-center">
            <div class="card">
              <p-tabView styleClass="tabview-custom">
                <p-tabPanel>
                  <ng-template pTemplate="header">
                    <i class="pi pi-chart-bar"></i>
                    <span>Stats</span>
                  </ng-template>
                  <div class="flex flex-row gap-x-8">
                    <div class="w-1/3">
                      <!-- <div class="mb-7 w-full">
                        <p-card class="mx-auto">
                          <p class="text-lg font-medium text-gray-700">Win Rate</p>

                          <div class="header mx-auto flex flex-row items-center justify-evenly gap-x-5">
                            <img class="image-badge" src="../../../assets/images/icons8-trophy-100.png" alt="trophy" />

                            <p class="text-2xl font-medium text-gray-700">20%</p>
                          </div>
                          <div class="mt-8">
                            <div class="flex flex-row items-center justify-between">
                              <p>Win</p>
                              <p>20</p>
                            </div>
                            <hr class="mb-2 bg-slate-500" />

                            <div class="flex flex-row items-center justify-between">
                              <p>Lose</p>
                              <p>20</p>
                            </div>
                            <hr class="mb-2 bg-slate-500" />

                            <div class="flex flex-row items-center justify-between">
                              <p>Drew</p>
                              <p>20</p>
                            </div>
                            <hr class="bg-slate-500" />
                          </div>
                        </p-card>
                      </div> -->

                      <div class="w-full">
                        <p-card class="mx-auto">
                          <p class="text-lg font-medium text-gray-700">Tokens</p>

                          <div class="header mx-auto flex flex-row items-center justify-evenly gap-x-5">
                            <img class="image-badge" src="../../../assets/images/icons8-token-64.png" alt="trophy" />

                            <p class="text-2xl font-medium text-gray-700">20</p>
                          </div>
                          <div class="mt-8">
                            <div class="flex flex-row items-center justify-between">
                              <p>Gems</p>
                              <p>20</p>
                            </div>
                            <hr class="mb-2 bg-slate-500" />

                            <div class="flex flex-row items-center justify-between">
                              <p>Aura</p>
                              <p>20</p>
                            </div>
                            <hr class="mb-2 bg-slate-500" />

                            <div class="flex flex-row items-center justify-between">
                              <p>Stones</p>
                              <p>20</p>
                            </div>
                            <hr class="bg-slate-500" />
                          </div>
                        </p-card>
                      </div>
                    </div>

                    <div class="w-2/3">
                      <p-card>
                        <div class="card">
                          <p class="text-lg font-medium text-gray-700">Battles</p>
                          <p-table
                            [value]="battles"
                            sortField="representative.name"
                            sortMode="single"
                            [scrollable]="true"
                            scrollHeight="400px"
                            rowGroupMode="subheader"
                            groupRowsBy="representative.name">
                            <ng-template pTemplate="header">
                              <tr>
                                <th style="min-width: 50px">1st Player</th>
                                <th style="min-width: 50px">2nd Player</th>
                                <th style="min-width: 50px">Win</th>
                                <th style="min-width: 50px">Lose</th>
                                <th style="min-width: 50px">Date</th>
                                <th style="min-width: 50px">Award</th>
                              </tr>
                            </ng-template>
                            <ng-template pTemplate="groupheader" let-customer>
                              <tr pRowGroupHeader>
                                <td colspan="6">
                                  <span class="p-text-bold p-ml-2">{{ customer.representative.name }}</span>
                                </td>
                              </tr>
                            </ng-template>
                            <!-- <ng-template pTemplate="groupfooter" let-customer>
                                                          <tr class="p-rowgroup-footer">
                                                              <td style="min-width: 80%">
                                                                  <div style="text-align: right; width: 100%">Total Customers</div>
                                                              </td>
                                                              <td style="width: 20%">{{calculateCustomerTotal(customer.representative.name)}}</td>
                                                          </tr>
                                                      </ng-template> -->
                            <ng-template pTemplate="body" let-customer let-rowIndex="rowIndex">
                              <tr>
                                <td style="min-width: 50px">
                                  {{ customer.playerOneUserName }}
                                </td>
                                <td style="min-width: 50px">
                                  <span class="image-text">{{ customer.playerTwoUserName }}</span>
                                </td>
                                <td style="min-width: 50px">
                                  {{ customer.winner ? 'True' : 'False' }}
                                </td>
                                <td style="min-width: 50px">
                                  <span [class]="'customer-badge status-' + customer.status">{{
                                    customer.winner ? 'True' : 'False'
                                  }}</span>
                                </td>
                                <td style="min-width: 50px">
                                  {{ customer.time }}
                                </td>
                                <td style="min-width: 50px">
                                  <!-- {{customer.date}} -->
                                  50 Tokens
                                </td>
                              </tr>
                            </ng-template>
                          </p-table>
                        </div>
                      </p-card>
                    </div>
                  </div>
                </p-tabPanel>
                <p-tabPanel header="Header II">
                  <ng-template pTemplate="header">
                    <i class="pi pi-prime"></i>
                    <span>Battles</span>
                  </ng-template>
                  <div class="container">
                    <p-card>
                      <div class="card">
                        <p class="text-lg font-medium text-gray-700">Battles</p>
                        <p-table
                          [value]="battles"
                          sortField="representative.name"
                          sortMode="single"
                          [scrollable]="true"
                          scrollHeight="400px"
                          rowGroupMode="subheader"
                          groupRowsBy="representative.name">
                          <ng-template pTemplate="header">
                            <tr>
                              <th style="min-width: 50px">1st Player</th>
                              <th style="min-width: 50px">2nd Player</th>
                              <th style="min-width: 50px">Win</th>
                              <th style="min-width: 50px">Lose</th>
                              <th style="min-width: 50px">Date</th>
                              <th style="min-width: 50px">Award</th>
                            </tr>
                          </ng-template>
                          <ng-template pTemplate="groupheader" let-customer>
                            <tr pRowGroupHeader>
                              <td colspan="6">
                                <span class="p-text-bold p-ml-2">{{ customer.representative.name }}</span>
                              </td>
                            </tr>
                          </ng-template>
                          <!-- <ng-template pTemplate="groupfooter" let-customer>
                                                      <tr class="p-rowgroup-footer">
                                                          <td style="min-width: 80%">
                                                              <div style="text-align: right; width: 100%">Total Customers</div>
                                                          </td>
                                                          <td style="width: 20%">{{calculateCustomerTotal(customer.representative.name)}}</td>
                                                      </tr>
                                                  </ng-template> -->
                          <ng-template pTemplate="body" let-customer let-rowIndex="rowIndex">
                            <tr>
                              <td style="min-width: 50px">
                                {{ customer.playerOneUserName }}
                              </td>
                              <td style="min-width: 50px">
                                <span class="image-text">{{ customer.playerTwoUserName }}</span>
                              </td>
                              <td style="min-width: 50px">
                                {{ customer.winner ? 'True' : 'False' }}
                              </td>
                              <td style="min-width: 50px">
                                <span [class]="'customer-badge status-' + customer.status">{{
                                  customer.winner ? 'True' : 'False'
                                }}</span>
                              </td>
                              <td style="min-width: 50px">
                                {{ customer.time }}
                              </td>
                              <td style="min-width: 50px">
                                <!-- {{customer.date}} -->
                                50 Tokens
                              </td>
                            </tr>
                          </ng-template>
                        </p-table>
                      </div>
                    </p-card>
                  </div>
                </p-tabPanel>
                <p-tabPanel header="Header III">
                  <ng-template pTemplate="header">
                    <i class="pi pi-megaphone"></i>
                    <span>Achievements</span>
                    <!-- <i class="pi pi-cog"></i> -->
                  </ng-template>
                  <p>
                    At vero eos et accusamus et iusto odio dignissimos ducimus qui blanditiis praesentium voluptatum
                    deleniti atque corrupti quos dolores et quas molestias excepturi sint occaecati cupiditate non
                    provident, similique sunt in culpa qui officia deserunt mollitia animi, id est laborum et dolorum
                    fuga. Et harum quidem rerum facilis est et expedita distinctio. Nam libero tempore, cum soluta nobis
                    est eligendi optio cumque nihil impedit quo minus.
                  </p>
                </p-tabPanel>
                <p-tabPanel header="Header III">
                  <ng-template pTemplate="header">
                    <i class="pi pi-money-bill"></i>
                    <span>Purchases</span>
                    <!-- <i class="pi pi-cog"></i> -->
                  </ng-template>
                  <p>
                    At vero eos et accusamus et iusto odio dignissimos ducimus qui blanditiis praesentium voluptatum
                    deleniti atque corrupti quos dolores et quas molestias excepturi sint occaecati cupiditate non
                    provident, similique sunt in culpa qui officia deserunt mollitia animi, id est laborum et dolorum
                    fuga. Et harum quidem rerum facilis est et expedita distinctio. Nam libero tempore, cum soluta nobis
                    est eligendi optio cumque nihil impedit quo minus.
                  </p>
                </p-tabPanel>
              </p-tabView>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>
</main>
